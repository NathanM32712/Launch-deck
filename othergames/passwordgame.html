<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Launch Deck Password Game</title>
  <link rel="icon" type="image/png" href="../icon.png" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1113;
      --panel:#151718;
      --muted:#d7e0e2;
      --accent:#00d7d7;
      --good:#0f6;
      --bad:#f55;
      --select:#2a6b6b;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--muted);font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{display:flex;align-items:center;padding:12px 16px;background:#0c0d0e;border-bottom:1px solid rgba(255,255,255,0.03)}
    header img{height:34px;cursor:pointer}
    header h1{margin:0 auto;font-size:1.15rem;color:var(--accent);letter-spacing:0.6px}
    .wrap{max-width:920px;margin:36px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:10px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    .top-row{display:flex;gap:12px;align-items:center;margin-bottom:14px}
    #password{flex:1;padding:12px 14px;font-size:1.05rem;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:var(--panel);color:var(--muted);outline:none}
    #password::placeholder{color:rgba(215,224,226,0.45)}
    .status{min-width:240px;text-align:right;color:var(--muted);font-size:0.95rem}
    .progress{height:10px;background:rgba(255,255,255,0.03);border-radius:999px;margin-top:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#6ef3f3);width:0%}
    .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
    button{background:var(--accent);border:none;color:#001;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    button[disabled]{opacity:0.45;cursor:default}
    .rules{list-style:none;padding:0;margin:18px 0 0 0;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .rules li{background:var(--panel);padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-size:0.95rem;transition:transform .18s ease,opacity .18s ease;cursor:pointer}
    .rules li.hidden{display:none}
    .rules li.selected{outline:2px solid var(--select);box-shadow:0 4px 18px rgba(42,107,107,0.12);background:linear-gradient(180deg, rgba(42,107,107,0.06), transparent)}
    .complete{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:22px;border-radius:10px;background:linear-gradient(180deg, rgba(0,128,128,0.06), rgba(0,128,128,0.02));color:var(--good);font-weight:700}
    .hint{font-size:0.86rem;color:rgba(215,224,226,0.7);margin-top:8px}
    .small{font-size:0.86rem;color:rgba(215,224,226,0.6)}
    @media (max-width:820px){.rules{grid-template-columns:1fr}.status{text-align:left}}
  </style>
</head>
<body>
  <header>
    <a href="../Launch-Deck"><img src="../icon.png" alt="Launch Deck"></a>
    <h1>Launch Deck Password Game</h1>
  </header>

  <main class="wrap" role="main">
    <div class="top-row">
      <input id="password" type="text" placeholder="Type your silly password here â€” rules will hide as you satisfy them" autocomplete="off" />
      <div class="status" aria-live="polite">
        <div id="counter">Rules remaining: <strong id="remaining">35</strong></div>
        <div class="progress" aria-hidden="true"><i id="bar"></i></div>
        <div class="small" id="note">You have one freebie. Select a rule and click Use freebie to hide it permanently.</div>
      </div>
    </div>

    <div class="controls">
      <button id="useFreebie">Use freebie</button>
      <div class="small" id="freebieStatus">Freebie available</div>
    </div>

    <div id="content">
      <ul class="rules" id="rules">
        <li id="rule1">Rule 1: Password must be at least 5 characters.</li>
        <li id="rule2">Rule 2: Must include a number (0â€“9).</li>
        <li id="rule3">Rule 3: Must include an uppercase letter.</li>
        <li id="rule4">Rule 4: Must include a special character (non-alphanumeric).</li>
        <li id="rule5">Rule 5: All digits in the password must add up to exactly 25.</li>
        <li id="rule6">Rule 6: Must include a month name (Januaryâ€“December).</li>
        <li id="rule7">Rule 7: Must include a Roman numeral (Iâ€“XII, etc.).</li>
        <li id="rule8">Rule 8: Must include the current year (e.g., 2025).</li>
        <li id="rule9">Rule 9: Must include the current day of the week (e.g., Friday).</li>
        <li id="rule10">Rule 10: Must include the current time in HH:MM (24-hour) format.</li>
        <li id="rule11">Rule 11: Must include a country name (common country names accepted).</li>
        <li id="rule12">Rule 12: Must include an animal name (common animals accepted).</li>
        <li id="rule13">Rule 13: Must include at least one emoji.</li>
        <li id="rule14">Rule 14: Must include a planet name (Mercuryâ€“Neptune, Pluto accepted).</li>
        <li id="rule15">Rule 15: Must include a prime number (e.g., 2,3,5,7,11...).</li>
        <li id="rule16">Rule 16: Must include a chess move in algebraic notation (e.g., Nf3, e4, O-O).</li>
        <li id="rule17">Rule 17: Must include a chemical element symbol (H, He, O, Fe, Au, etc.).</li>
        <li id="rule18">Rule 18: Must include a Bible-style verse reference (e.g., John 3:16).</li>
        <li id="rule19">Rule 19: Must include a PokÃ©mon name (common names accepted).</li>
        <li id="rule20">Rule 20: Must include a US presidentâ€™s last name (common list accepted).</li>
        <li id="rule21">Rule 21: Must include a zodiac sign (Ariesâ€“Pisces).</li>
        <li id="rule22">Rule 22: Must include a famous painting title (common titles accepted).</li>
        <li id="rule23">Rule 23: Must include a Greek letter name (alpha, beta, gamma, ...).</li>
        <li id="rule24">Rule 24: Must include a constellation name (Orion, Lyra, etc.).</li>
        <li id="rule25">Rule 25: Must include a math constant (pi, Ï€, e, phi, Ï†, tau).</li>
        <li id="rule26">Rule 26: Must include a programming keyword (if, else, while, return, function, class, for).</li>
        <li id="rule27">Rule 27: Must include a musical note (Aâ€“G, optional # or b).</li>
        <li id="rule28">Rule 28: Must include a Shakespeare play title (Hamlet, Macbeth, etc.).</li>
        <li id="rule29">Rule 29: Must include a currency symbol ($ â‚¬ Â£ Â¥).</li>
        <li id="rule30">Rule 30: Must include a capital city (Paris, London, Tokyo, etc.).</li>
        <li id="rule31">Rule 31: Must include a fruit name (apple, banana, etc.).</li>
        <li id="rule32">Rule 32: Must include a dinosaur name (T-Rex, Velociraptor, etc.).</li>
        <li id="rule33">Rule 33: Must include a famous scientistâ€™s last name (Einstein, Newton, Curie, etc.).</li>
        <li id="rule34">Rule 34: Must include a Harry Potter spell (Lumos, Expelliarmus, etc.).</li>
        <li id="rule35">Rule 35: Must include the trivia answer: <strong>42</strong>.</li>
      </ul>
    </div>
  </main>

  <script>
    (function(){
      const input = document.getElementById('password');
      const rulesList = document.getElementById('rules');
      const remainingEl = document.getElementById('remaining');
      const bar = document.getElementById('bar');
      const useFreebieBtn = document.getElementById('useFreebie');
      const freebieStatus = document.getElementById('freebieStatus');

      // helpers for dynamic values
      function pad2(n){ return String(n).padStart(2,'0'); }
      function currentHHMM(){
        const d = new Date();
        return `${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
      }
      function currentDayName(){
        return ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][new Date().getDay()];
      }
      function currentYear(){
        return String(new Date().getFullYear());
      }

      // emoji detection: broad ranges
      const emojiRegex = /[\u231A-\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD-\u25FE\u2600-\u27BF\u2934-\u2935\u2B05-\u2B07\u2B1B-\u2B1C\u2B50\u2B55\u1F000-\u1F6FF\u1F900-\u1F9FF]/u;

      // utility: extract all integers (positive) from string
      function extractIntegers(s){
        const matches = s.match(/\d+/g);
        if(!matches) return [];
        return matches.map(x => parseInt(x,10));
      }

      // check if a number is prime (for reasonable small numbers)
      function isPrime(n){
        if(n <= 1) return false;
        if(n <= 3) return true;
        if(n % 2 === 0) return false;
        const limit = Math.floor(Math.sqrt(n));
        for(let i=3;i<=limit;i+=2) if(n % i === 0) return false;
        return true;
      }

      // lists for fuzzy matching
      const countries = ["United States","USA","Canada","France","Germany","China","Japan","Brazil","India","Australia","Mexico","Italy","Spain","Russia"];
      const animals = ["dog","cat","lion","tiger","bear","wolf","fox","elephant","giraffe","horse","cow","sheep","rabbit"];
      const planets = ["Mercury","Venus","Earth","Mars","Jupiter","Saturn","Uranus","Neptune","Pluto"];
      const pokemon = ["Pikachu","Charmander","Bulbasaur","Squirtle","Eevee","Mewtwo","Snorlax","Jigglypuff","Gengar","Magikarp"];
      const presidents = ["Washington","Adams","Jefferson","Madison","Monroe","Lincoln","Roosevelt","Truman","Eisenhower","Kennedy","Johnson","Nixon","Carter","Reagan","Clinton","Bush","Obama","Trump","Biden"];
      const zodiacs = ["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"];
      const paintings = ["Mona Lisa","Starry Night","The Scream","Guernica","Girl with a Pearl","Last Supper","The Persistence of Memory"];
      const greek = ["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"];
      const constellations = ["Orion","Ursa Major","Cassiopeia","Lyra","Scorpius","Andromeda","Pegasus","Taurus"];
      const shakespeare = ["Hamlet","Macbeth","Othello","King Lear","Romeo and Juliet","Julius Caesar","A Midsummer Night's Dream"];
      const musicalNotes = ["A","B","C","D","E","F","G"];
      const capitals = ["Paris","London","Tokyo","Berlin","Rome","Ottawa","Beijing","Washington","Canberra","Madrid","Moscow","Rome"];
      const fruits = ["apple","banana","orange","grape","pear","peach","mango","kiwi","strawberry"];
      const dinosaurs = ["T-Rex","TRex","Velociraptor","Triceratops","Stegosaurus","Brachiosaurus","Allosaurus"];
      const scientists = ["Einstein","Newton","Curie","Darwin","Tesla","Feynman","Hawking","Pasteur","Galileo"];
      const hpSpells = ["Lumos","Expelliarmus","Avada Kedavra","Wingardium Leviosa","Expecto Patronum","Accio","Alohomora"];
      const programmingKeywords = ["if","else","while","return","function","class","for","switch","const","let","var"];
      const elementSymbols = ["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Fe","Au","Ag","Cu","Zn"];
      const chessPattern = /\b([KQRBN]?[a-h][1-8]|[a-h][1-8]|O-O-O|O-O)\b/;
      const romanPattern = /\bM{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})\b/;
      const bibleRefPattern = /\b([A-Za-z]+)\s+\d{1,3}:\d{1,3}\b/;
      const musicalNotePattern = /\b([A-G])(#|b)?\b/;
      const currencyPattern = /[\$\â‚¬\Â£\Â¥]/;
      const mathConstantsPattern = /\b(pi|Ï€|e|phi|Ï†|tau)\b/i;
      const greekPatternRegex = new RegExp('\\b(' + greek.join('|') + ')\\b','i');

      // rule checks
      const checks = {
        rule1: pwd => pwd.length >= 5,
        rule2: pwd => /\d/.test(pwd),
        rule3: pwd => /[A-Z]/.test(pwd),
        rule4: pwd => /[^A-Za-z0-9]/.test(pwd),
        rule5: pwd => {
          const digits = [...pwd].filter(c => /\d/.test(c)).map(Number);
          if(digits.length === 0) return false;
          const sum = digits.reduce((a,b)=>a+b,0);
          return sum === 25;
        },
        rule6: pwd => /\b(January|February|March|April|May|June|July|August|September|October|November|December)\b/i.test(pwd),
        rule7: pwd => romanPattern.test(pwd),
        rule8: pwd => new RegExp('\\b' + currentYear() + '\\b').test(pwd),
        rule9: pwd => new RegExp('\\b' + currentDayName() + '\\b','i').test(pwd),
        rule10: pwd => new RegExp('\\b' + currentHHMM() + '\\b').test(pwd),
        rule11: pwd => countries.some(c => new RegExp('\\b' + c.replace(/\s+/g,'\\s+') + '\\b','i').test(pwd)),
        rule12: pwd => animals.some(a => new RegExp('\\b' + a + '\\b','i').test(pwd)),
        rule13: pwd => emojiRegex.test(pwd),
        rule14: pwd => planets.some(p => new RegExp('\\b' + p + '\\b','i').test(pwd)),
        rule15: pwd => {
          const ints = extractIntegers(pwd);
          return ints.some(n => isPrime(n));
        },
        rule16: pwd => chessPattern.test(pwd),
        rule17: pwd => elementSymbols.some(s => new RegExp('\\b' + s + '\\b').test(pwd)),
        rule18: pwd => bibleRefPattern.test(pwd),
        rule19: pwd => pokemon.some(p => new RegExp('\\b' + p + '\\b','i').test(pwd)),
        rule20: pwd => presidents.some(p => new RegExp('\\b' + p + '\\b','i').test(pwd)),
        rule21: pwd => zodiacs.some(z => new RegExp('\\b' + z + '\\b','i').test(pwd)),
        rule22: pwd => paintings.some(p => new RegExp(p.replace(/\s+/g,'\\s+'),'i').test(pwd)),
        rule23: pwd => greekPatternRegex.test(pwd),
        rule24: pwd => constellations.some(c => new RegExp('\\b' + c + '\\b','i').test(pwd)),
        rule25: pwd => mathConstantsPattern.test(pwd),
        rule26: pwd => programmingKeywords.some(k => new RegExp('\\b' + k + '\\b').test(pwd)),
        rule27: pwd => musicalNotePattern.test(pwd),
        rule28: pwd => shakespeare.some(s => new RegExp(s.replace(/\s+/g,'\\s+'),'i').test(pwd)),
        rule29: pwd => currencyPattern.test(pwd),
        rule30: pwd => capitals.some(c => new RegExp('\\b' + c + '\\b','i').test(pwd)),
        rule31: pwd => fruits.some(f => new RegExp('\\b' + f + '\\b','i').test(pwd)),
        rule32: pwd => dinosaurs.some(d => new RegExp(d.replace(/\-/g,'[- ]?'),'i').test(pwd)),
        rule33: pwd => scientists.some(s => new RegExp('\\b' + s + '\\b','i').test(pwd)),
        rule34: pwd => hpSpells.some(s => new RegExp('\\b' + s.replace(/\s+/g,'\\s+') + '\\b','i').test(pwd)),
        rule35: pwd => /\b42\b/.test(pwd)
      };

      // state and queue for sequential hiding
      const ruleIds = Object.keys(checks);
      const state = {}; // 'visible' | 'hidden'
      const hideQueue = [];
      const hideDelay = 200; // ms between hiding rules
      let hideTimer = null;

      // freebie state
      let freebieUsed = false;
      let selectedRule = null;

      ruleIds.forEach(id => state[id] = 'visible');

      function updateCounter(){
        const remaining = ruleIds.filter(id => state[id] === 'visible').length;
        remainingEl.textContent = remaining;
        const pct = Math.round(((ruleIds.length - remaining) / ruleIds.length) * 100);
        bar.style.width = pct + '%';
      }

      function processQueue(){
        if(hideTimer) return;
        function step(){
          if(hideQueue.length === 0){
            hideTimer = null;
            checkComplete();
            return;
          }
          const id = hideQueue.shift();
          const li = document.getElementById(id);
          if(!li){ step(); return; }
          const pwd = input.value;
          try{
            if(checks[id](pwd) && state[id] === 'visible'){
              li.classList.add('hidden');
              state[id] = 'hidden';
              // if this was the selected rule, clear selection
              if(selectedRule === id) {
                selectedRule = null;
                clearSelectionStyles();
              }
              updateCounter();
            }
          }catch(e){
            if(state[id] === 'hidden'){
              li.classList.remove('hidden');
              state[id] = 'visible';
              updateCounter();
            }
          }
          hideTimer = setTimeout(step, hideDelay);
        }
        hideTimer = setTimeout(step, 0);
      }

      function removeFromQueue(id){
        const idx = hideQueue.indexOf(id);
        if(idx !== -1) hideQueue.splice(idx,1);
      }

      function showRule(id){
        const li = document.getElementById(id);
        if(!li) return;
        if(state[id] === 'visible') return;
        li.classList.remove('hidden');
        state[id] = 'visible';
        updateCounter();
        removeFromQueue(id);
      }

      function checkComplete(){
        const remaining = ruleIds.filter(id => state[id] === 'visible').length;
        if(remaining === 0){
          const content = document.getElementById('content');
          content.innerHTML = '<div class="complete">ðŸŽ‰ Game Complete! You satisfied all rules.<div class="hint">Nice work â€” that was chaotic and precise.</div></div>';
        }
      }

      function handleInput(){
        const pwd = input.value;
        ruleIds.forEach(id => {
          let passes = false;
          try{ passes = !!checks[id](pwd); } catch(e){ passes = false; }
          if(passes){
            if(state[id] === 'visible' && hideQueue.indexOf(id) === -1){
              // if rule was previously selected for freebie, do not auto-queue it
              if(selectedRule === id && !freebieUsed){
                // keep selected visible until user uses freebie or it becomes satisfied and queued normally
                hideQueue.push(id); // still queue so it will hide normally if satisfied
              } else {
                hideQueue.push(id);
              }
            }
          } else {
            if(state[id] === 'hidden'){
              // if hidden by freebie, keep hidden permanently
              // otherwise show it again
              const li = document.getElementById(id);
              if(li && li.dataset.hiddenBy === 'freebie') {
                // keep hidden
              } else {
                showRule(id);
              }
            }
            removeFromQueue(id);
          }
        });
        if(hideQueue.length > 0) processQueue();
        updateFreebieUI();
      }

      // selection handling
      function clearSelectionStyles(){
        ruleIds.forEach(id => {
          const li = document.getElementById(id);
          if(li) li.classList.remove('selected');
        });
      }

      rulesList.addEventListener('click', (e) => {
        const li = e.target.closest('li');
        if(!li) return;
        const id = li.id;
        // only allow selecting visible rules and only if freebie not used
        if(freebieUsed) return;
        if(state[id] !== 'visible') return;
        // toggle selection
        if(selectedRule === id){
          selectedRule = null;
          li.classList.remove('selected');
        } else {
          selectedRule = id;
          clearSelectionStyles();
          li.classList.add('selected');
        }
        updateFreebieUI();
      });

      function updateFreebieUI(){
        if(freebieUsed){
          useFreebieBtn.disabled = true;
          freebieStatus.textContent = 'Freebie used';
        } else {
          useFreebieBtn.disabled = !selectedRule;
          freebieStatus.textContent = selectedRule ? 'Freebie ready for selected rule' : 'Freebie available';
        }
      }

      useFreebieBtn.addEventListener('click', () => {
        if(freebieUsed) return;
        if(!selectedRule) return;
        const id = selectedRule;
        const li = document.getElementById(id);
        if(!li) return;
        // hide permanently and mark as hiddenBy freebie
        li.classList.add('hidden');
        li.dataset.hiddenBy = 'freebie';
        state[id] = 'hidden';
        freebieUsed = true;
        selectedRule = null;
        clearSelectionStyles();
        // remove from any queue
        removeFromQueue(id);
        updateCounter();
        updateFreebieUI();
        checkComplete();
      });

      // initialize
      updateCounter();
      updateFreebieUI();
      input.addEventListener('input', handleInput);
      setTimeout(handleInput, 120);
      setInterval(handleInput, 15000);
    })();
  </script>
</body>
</html>

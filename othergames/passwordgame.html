<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Launch Deck Password Game â€” 100 rules</title>
  <link rel="icon" type="image/png" href="../icon.png" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0f1113;
      --panel:#151718;
      --muted:#d7e0e2;
      --accent:#00d7d7;
      --good:#0f6;
      --bad:#f55;
      --select:#2a6b6b;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--muted);font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{display:flex;align-items:center;padding:12px 16px;background:#0c0d0e;border-bottom:1px solid rgba(255,255,255,0.03)}
    header img{height:34px;cursor:pointer}
    header h1{margin:0 auto;font-size:1.15rem;color:var(--accent);letter-spacing:0.6px}
    .wrap{max-width:980px;margin:36px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:10px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    .top-row{display:flex;gap:12px;align-items:center;margin-bottom:14px}
    #password{flex:1;padding:12px 14px;font-size:1.05rem;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:var(--panel);color:var(--muted);outline:none}
    #password::placeholder{color:rgba(215,224,226,0.45)}
    .status{min-width:260px;text-align:right;color:var(--muted);font-size:0.95rem}
    .progress{height:10px;background:rgba(255,255,255,0.06);border-radius:999px;margin-top:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#6ef3f3);width:0%}
    .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
    button{background:var(--accent);border:none;color:#001;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    button[disabled]{opacity:0.45;cursor:default}
    .rules{list-style:none;padding:0;margin:18px 0 0 0;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .rules li{background:var(--panel);padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);font-size:0.95rem;transition:transform .18s ease,opacity .18s ease;cursor:pointer}
    .rules li.hidden{display:none}
    .rules li.selected{outline:2px solid var(--select);box-shadow:0 4px 18px rgba(42,107,107,0.12);background:linear-gradient(180deg, rgba(42,107,107,0.06), transparent)}
    .complete{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:22px;border-radius:10px;background:linear-gradient(180deg, rgba(0,128,128,0.06), rgba(0,128,128,0.02));color:var(--good);font-weight:700}
    .hint{font-size:0.86rem;color:rgba(215,224,226,0.7);margin-top:8px}
    .small{font-size:0.86rem;color:rgba(215,224,226,0.6)}
    @media (max-width:820px){.rules{grid-template-columns:1fr}.status{text-align:left}}
  </style>
</head>
<body>
  <header>
    <a href="../Launch-Deck"><img src="../icon.png" alt="Launch Deck"></a>
    <h1>Launch Deck Password Game â€” 100 rules</h1>
  </header>

  <main class="wrap" role="main">
    <div class="top-row">
      <input id="password" type="text" placeholder="Type your chaotic password â€” rules hide as you satisfy them" autocomplete="off" />
      <div class="status" aria-live="polite">
        <div id="counter">Rules remaining: <strong id="remaining">100</strong></div>
        <div class="progress" aria-hidden="true"><i id="bar"></i></div>
        <div class="small" id="note">One freebie: select a visible rule and click Use freebie to hide it permanently.</div>
      </div>
    </div>

    <div class="controls">
      <button id="useFreebie">Use freebie</button>
      <div class="small" id="freebieStatus">Freebie available</div>
    </div>

    <div id="content">
      <ul class="rules" id="rules"></ul>
    </div>
  </main>

  <script>
    (function(){
      // UI refs
      const input = document.getElementById('password');
      const rulesList = document.getElementById('rules');
      const remainingEl = document.getElementById('remaining');
      const bar = document.getElementById('bar');
      const useFreebieBtn = document.getElementById('useFreebie');
      const freebieStatus = document.getElementById('freebieStatus');

      // helpers for dynamic values
      function pad2(n){ return String(n).padStart(2,'0'); }
      function currentHHMM(){ const d = new Date(); return `${pad2(d.getHours())}:${pad2(d.getMinutes())}`; }
      function currentDayName(){ return ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][new Date().getDay()]; }
      function currentYear(){ return String(new Date().getFullYear()); }

      // utility: extract all integers (positive) from string
      function extractIntegers(s){ const m = s.match(/\d+/g); return m ? m.map(x=>parseInt(x,10)) : []; }

      // prime check
      function isPrime(n){
        if(n<=1) return false; if(n<=3) return true; if(n%2===0) return false;
        for(let i=3;i*i<=n;i+=2){ if(n%i===0) return false; } return true;
      }

      // emoji detection (broad ranges)
      const emojiRegex = /[\u231A-\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD-\u25FE\u2600-\u27BF\u2934-\u2935\u2B05-\u2B07\u2B1B-\u2B1C\u2B50\u2B55\u1F000-\u1F6FF\u1F900-\u1F9FF]/u;

      // data sets
      const countries = ["United States","USA","Canada","France","Germany","China","Japan","Brazil","India","Australia","Mexico","Italy","Spain","Russia"];
      const animals = ["dog","cat","lion","tiger","bear","wolf","fox","elephant","giraffe","horse","cow","sheep","rabbit"];
      const planets = ["Mercury","Venus","Earth","Mars","Jupiter","Saturn","Uranus","Neptune","Pluto"];
      const pokemon = ["Pikachu","Charmander","Bulbasaur","Squirtle","Eevee","Mewtwo","Snorlax","Jigglypuff","Gengar","Magikarp"];
      const presidents = ["Washington","Adams","Jefferson","Madison","Monroe","Lincoln","Roosevelt","Truman","Eisenhower","Kennedy","Johnson","Nixon","Carter","Reagan","Clinton","Bush","Obama","Trump","Biden"];
      const zodiacs = ["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"];
      const paintings = ["Mona Lisa","Starry Night","The Scream","Guernica","Girl with a Pearl","Last Supper","The Persistence of Memory"];
      const greek = ["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"];
      const constellations = ["Orion","Ursa Major","Cassiopeia","Lyra","Scorpius","Andromeda","Pegasus","Taurus"];
      const shakespeare = ["Hamlet","Macbeth","Othello","King Lear","Romeo and Juliet","Julius Caesar","A Midsummer Night's Dream"];
      const capitals = ["Paris","London","Tokyo","Berlin","Rome","Ottawa","Beijing","Washington","Canberra","Madrid","Moscow"];
      const fruits = ["apple","banana","orange","grape","pear","peach","mango","kiwi","strawberry"];
      const dinosaurs = ["T-Rex","TRex","Velociraptor","Triceratops","Stegosaurus","Brachiosaurus","Allosaurus"];
      const scientists = ["Einstein","Newton","Curie","Darwin","Tesla","Feynman","Hawking","Pasteur","Galileo"];
      const hpSpells = ["Lumos","Expelliarmus","Avada Kedavra","Wingardium Leviosa","Expecto Patronum","Accio","Alohomora"];
      const programmingKeywords = ["if","else","while","return","function","class","for","switch","const","let","var"];
      const elementSymbols = ["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Fe","Au","Ag","Cu","Zn"];
      const chessPattern = /\b([KQRBN]?[a-h][1-8]|[a-h][1-8]|O-O-O|O-O)\b/;
      const romanPattern = /\bM{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})\b/;
      const bibleRefPattern = /\b([A-Za-z]+)\s+\d{1,3}:\d{1,3}\b/;
      const musicalNotePattern = /\b([A-G])(#|b)?\b/;
      const currencyPattern = /[\$\â‚¬\Â£\Â¥]/;
      const mathConstantsPattern = /\b(pi|Ï€|e|phi|Ï†|tau)\b/i;
      const weekdayPattern = /\b(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)\b/i;

      const colors = ["red","blue","green","yellow","purple","orange","pink","brown","black","white","cyan","magenta","teal","maroon","navy"];
      const statesUS = ["Wisconsin","California","Texas","Florida","New York","Minnesota","Illinois","Washington","Oregon","Colorado","Arizona","Nevada","Ohio","Michigan"];
      const sports = ["soccer","football","basketball","baseball","tennis","golf","hockey","volleyball","cricket","rugby"];
      const movies = ["Inception","Titanic","Avatar","The Godfather","Star Wars","Jurassic Park","The Matrix"];
      const instruments = ["guitar","piano","violin","drum","flute","saxophone","trumpet","cello"];
      const boardGames = ["chess","checkers","monopoly","scrabble","catan","risk"];
      const videoGames = ["Zelda","Mario","Pokemon","Halo","Fortnite","Minecraft","Overwatch"];
      const flowers = ["rose","lily","tulip","orchid","daisy","sunflower"];
      const trees = ["oak","pine","maple","birch","willow","cedar","spruce"];
      const birds = ["eagle","sparrow","owl","parrot","penguin","falcon","robin"];
      const insects = ["ant","bee","butterfly","beetle","mosquito","dragonfly"];
      const carBrands = ["Toyota","Ford","Chevrolet","Honda","Tesla","BMW","Mercedes","Audi"];
      const techBrands = ["Apple","Microsoft","Google","Amazon","Meta","Samsung","Intel","AMD"];
      const socialNetworks = ["Twitter","X","Facebook","Instagram","TikTok","Snapchat","Reddit","LinkedIn"];
      const frameworks = ["React","Angular","Vue","Svelte","Django","Rails","Laravel","Spring"];
      const clouds = ["AWS","Azure","GCP","Google Cloud","Amazon Web Services","Microsoft Azure"];
      const httpStatus = ["200","301","302","400","401","403","404","500","502","503"];
      const mimeTypes = ["text/html","text/plain","application/json","image/png","image/jpeg","text/css","application/xml"];
      const seasons = ["Spring","Summer","Autumn","Fall","Winter"];
      const weather = ["rain","snow","sunny","cloudy","storm","wind","fog","hail"];
      const tlDomains = [".us",".uk",".jp",".de",".fr",".io",".dev",".app"];
      const languages = ["JavaScript","Python","Java","C","C++","C#","Go","Rust","Ruby","PHP","Swift","Kotlin"];

      // 100 rule meta definitions: id + label
      const rulesMeta = [
        {id:"rule1",label:"Rule 1: Password must be at least 5 characters."},
        {id:"rule2",label:"Rule 2: Must include a digit."},
        {id:"rule3",label:"Rule 3: Must include an uppercase letter."},
        {id:"rule4",label:"Rule 4: Must include a special character."},
        {id:"rule5",label:"Rule 5: Digits must add up to exactly 25."},
        {id:"rule6",label:"Rule 6: Include a month name."},
        {id:"rule7",label:"Rule 7: Include a Roman numeral."},
        {id:"rule8",label:"Rule 8: Include the current year."},
        {id:"rule9",label:"Rule 9: Include the current day of the week."},
        {id:"rule10",label:"Rule 10: Include the current time (HH:MM, 24h)."},
        {id:"rule11",label:"Rule 11: Include a country name."},
        {id:"rule12",label:"Rule 12: Include an animal name."},
        {id:"rule13",label:"Rule 13: Include an emoji."},
        {id:"rule14",label:"Rule 14: Include a planet name."},
        {id:"rule15",label:"Rule 15: Include a prime number."},
        {id:"rule16",label:"Rule 16: Include a chess move (e.g., Nf3, O-O)."},
        {id:"rule17",label:"Rule 17: Include a chemical element symbol."},
        {id:"rule18",label:"Rule 18: Include a Bible-style verse (e.g., John 3:16)."},
        {id:"rule19",label:"Rule 19: Include a PokÃ©mon name."},
        {id:"rule20",label:"Rule 20: Include a US presidentâ€™s last name."},
        {id:"rule21",label:"Rule 21: Include a zodiac sign."},
        {id:"rule22",label:"Rule 22: Include a famous painting title."},
        {id:"rule23",label:"Rule 23: Include a Greek letter name."},
        {id:"rule24",label:"Rule 24: Include a constellation name."},
        {id:"rule25",label:"Rule 25: Include a math constant (pi/Ï€/e/phi/Ï†/tau)."},
        {id:"rule26",label:"Rule 26: Include a programming keyword."},
        {id:"rule27",label:"Rule 27: Include a musical note (Aâ€“G, #/b allowed)."},
        {id:"rule28",label:"Rule 28: Include a Shakespeare play title."},
        {id:"rule29",label:"Rule 29: Include a currency symbol."},
        {id:"rule30",label:"Rule 30: Include a capital city."},
        {id:"rule31",label:"Rule 31: Include a fruit name."},
        {id:"rule32",label:"Rule 32: Include a dinosaur name."},
        {id:"rule33",label:"Rule 33: Include a famous scientistâ€™s last name."},
        {id:"rule34",label:"Rule 34: Include a Harry Potter spell."},
        {id:"rule35",label:"Rule 35: Include the trivia answer 42."},
        {id:"rule36",label:"Rule 36: Include a color name."},
        {id:"rule37",label:"Rule 37: Include a US state."},
        {id:"rule38",label:"Rule 38: Include a sport."},
        {id:"rule39",label:"Rule 39: Include a popular movie title."},
        {id:"rule40",label:"Rule 40: Include a URL-like pattern (http:// or https://)."},
        {id:"rule41",label:"Rule 41: Include an email-like pattern (name@domain)."},
        {id:"rule42",label:"Rule 42: Include a hex color code (e.g., #FF00FF)."},
        {id:"rule43",label:"Rule 43: Include a binary sequence (e.g., 1010)."},
        {id:"rule44",label:"Rule 44: Include at least three vowels."},
        {id:"rule45",label:"Rule 45: Include a known palindrome (e.g., level, kayak, racecar)."},
        {id:"rule46",label:"Rule 46: Include a doubled letter (e.g., tt)."},
        {id:"rule47",label:"Rule 47: Include 123 or 321."},
        {id:"rule48",label:"Rule 48: Include any weekday name."},
        {id:"rule49",label:"Rule 49: Include a timezone abbreviation (CST/EST/PST/etc.)."},
        {id:"rule50",label:"Rule 50: Include a cardinal direction (North/South/East/West)."},
        {id:"rule51",label:"Rule 51: Include a measurement unit (cm/kg/m/s)."},
        {id:"rule52",label:"Rule 52: Include a programming language name."},
        {id:"rule53",label:"Rule 53: Include a file extension (.html/.css/.js)."},
        {id:"rule54",label:"Rule 54: Include an HTML tag-like string (e.g., <div>)."},
        {id:"rule55",label:"Rule 55: Include parentheses ()."},
        {id:"rule56",label:"Rule 56: Include a quotation mark (' or \")."},
        {id:"rule57",label:"Rule 57: Include a math operator (+ - * /)."},
        {id:"rule58",label:"Rule 58: Include an underscore _."},
        {id:"rule59",label:"Rule 59: Include a tilde ~."},
        {id:"rule60",label:"Rule 60: Include a backslash \\."},
        {id:"rule61",label:"Rule 61: Include an at sign @."},
        {id:"rule62",label:"Rule 62: Include two different currency symbols."},
        {id:"rule63",label:"Rule 63: Include a number word (oneâ€“ten)."},
        {id:"rule64",label:"Rule 64: Include a season name."},
        {id:"rule65",label:"Rule 65: Include a weather word."},
        {id:"rule66",label:"Rule 66: Include a musical instrument."},
        {id:"rule67",label:"Rule 67: Include a board game name."},
        {id:"rule68",label:"Rule 68: Include a video game franchise."},
        {id:"rule69",label:"Rule 69: Include a flower name."},
        {id:"rule70",label:"Rule 70: Include a tree name."},
        {id:"rule71",label:"Rule 71: Include a bird name."},
        {id:"rule72",label:"Rule 72: Include an insect name."},
        {id:"rule73",label:"Rule 73: Include a car brand."},
        {id:"rule74",label:"Rule 74: Include a tech brand."},
        {id:"rule75",label:"Rule 75: Include a social network name."},
        {id:"rule76",label:"Rule 76: Include a software framework."},
        {id:"rule77",label:"Rule 77: Include a cloud provider."},
        {id:"rule78",label:"Rule 78: Include an HTTP status code."},
        {id:"rule79",label:"Rule 79: Include a MIME type."},
        {id:"rule80",label:"Rule 80: Include an RFC-like string (e.g., RFC 2616)."},
        {id:"rule81",label:"Rule 81: Include an IPv4-like pattern (e.g., 1.1.1.1)."},
        {id:"rule82",label:"Rule 82: Include a semicolon ; or colon :."},
        {id:"rule83",label:"Rule 83: Include an equals sign =."},
        {id:"rule84",label:"Rule 84: Include curly braces {}."},
        {id:"rule85",label:"Rule 85: Include square brackets []."},
        {id:"rule86",label:"Rule 86: Include angle brackets <>."},
        {id:"rule87",label:"Rule 87: Include a heart emoji (â¤ï¸ or ðŸ’– acceptable)."},
        {id:"rule88",label:"Rule 88: Include a Greek symbol (Ï€/Ï†)."},
        {id:"rule89",label:"Rule 89: Include >= or <=."},
        {id:"rule90",label:"Rule 90: Include a percentage %."},
        {id:"rule91",label:"Rule 91: Include a caret ^."},
        {id:"rule92",label:"Rule 92: Include a backtick `."},
        {id:"rule93",label:"Rule 93: Include the word level."},
        {id:"rule94",label:"Rule 94: Include a famous album (Thriller)."},
        {id:"rule95",label:"Rule 95: Include a famous artist (Beyonce)."},
        {id:"rule96",label:"Rule 96: Include a coffee word (espresso)."},
        {id:"rule97",label:"Rule 97: Include a tea word (oolong)."},
        {id:"rule98",label:"Rule 98: Include a cheese word (cheddar)."},
        {id:"rule99",label:"Rule 99: Include a TLD (.us/.uk/.jp/etc.)."},
        {id:"rule100",label:"Rule 100: Include the phrase Launch Deck."}
      ];

      // build checks for 100 rules
      const checks = {
        rule1: pwd => pwd.length >= 5,
        rule2: pwd => /\d/.test(pwd),
        rule3: pwd => /[A-Z]/.test(pwd),
        rule4: pwd => /[^A-Za-z0-9\s]/.test(pwd),
        rule5: pwd => { const digits=[...pwd].filter(c=>/\d/.test(c)).map(Number); return digits.length>0 && digits.reduce((a,b)=>a+b,0)===25; },
        rule6: pwd => /\b(January|February|March|April|May|June|July|August|September|October|November|December)\b/i.test(pwd),
        rule7: pwd => romanPattern.test(pwd),
        rule8: pwd => new RegExp('\\b'+currentYear()+'\\b').test(pwd),
        rule9: pwd => new RegExp('\\b'+currentDayName()+'\\b','i').test(pwd),
        rule10: pwd => new RegExp('\\b'+currentHHMM()+'\\b').test(pwd),
        rule11: pwd => countries.some(c=>new RegExp('\\b'+c.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule12: pwd => animals.some(a=>new RegExp('\\b'+a+'\\b','i').test(pwd)),
        rule13: pwd => emojiRegex.test(pwd),
        rule14: pwd => planets.some(p=>new RegExp('\\b'+p+'\\b','i').test(pwd)),
        rule15: pwd => extractIntegers(pwd).some(n=>isPrime(n)),
        rule16: pwd => chessPattern.test(pwd),
        rule17: pwd => elementSymbols.some(s=>new RegExp('\\b'+s+'\\b').test(pwd)),
        rule18: pwd => bibleRefPattern.test(pwd),
        rule19: pwd => pokemon.some(p=>new RegExp('\\b'+p+'\\b','i').test(pwd)),
        rule20: pwd => presidents.some(p=>new RegExp('\\b'+p+'\\b','i').test(pwd)),
        rule21: pwd => zodiacs.some(z=>new RegExp('\\b'+z+'\\b','i').test(pwd)),
        rule22: pwd => paintings.some(p=>new RegExp(p.replace(/\s+/g,'\\s+'),'i').test(pwd)),
        rule23: pwd => new RegExp('\\b('+greek.join('|')+')\\b','i').test(pwd),
        rule24: pwd => constellations.some(c=>new RegExp('\\b'+c+'\\b','i').test(pwd)),
        rule25: pwd => mathConstantsPattern.test(pwd),
        rule26: pwd => programmingKeywords.some(k=>new RegExp('\\b'+k+'\\b').test(pwd)),
        rule27: pwd => musicalNotePattern.test(pwd),
        rule28: pwd => shakespeare.some(s=>new RegExp(s.replace(/\s+/g,'\\s+'),'i').test(pwd)),
        rule29: pwd => currencyPattern.test(pwd),
        rule30: pwd => capitals.some(c=>new RegExp('\\b'+c+'\\b','i').test(pwd)),
        rule31: pwd => fruits.some(f=>new RegExp('\\b'+f+'\\b','i').test(pwd)),
        rule32: pwd => dinosaurs.some(d=>new RegExp(d.replace(/\-/g,'[- ]?'),'i').test(pwd)),
        rule33: pwd => scientists.some(s=>new RegExp('\\b'+s+'\\b','i').test(pwd)),
        rule34: pwd => hpSpells.some(s=>new RegExp('\\b'+s.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule35: pwd => /\b42\b/.test(pwd),
        rule36: pwd => colors.some(c=>new RegExp('\\b'+c+'\\b','i').test(pwd)),
        rule37: pwd => statesUS.some(s=>new RegExp('\\b'+s.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule38: pwd => sports.some(s=>new RegExp('\\b'+s+'\\b','i').test(pwd)),
        rule39: pwd => movies.some(m=>new RegExp('\\b'+m.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule40: pwd => /(https?:\/\/)/i.test(pwd),
        rule41: pwd => /\b[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}\b/i.test(pwd),
        rule42: pwd => /#[0-9A-Fa-f]{6}\b/.test(pwd),
        rule43: pwd => /\b[01]{4,}\b/.test(pwd),
        rule44: pwd => (pwd.match(/[aeiou]/gi)||[]).length >= 3,
        rule45: pwd => /\b(level|kayak|racecar)\b/i.test(pwd),
        rule46: pwd => /(.)\1/.test(pwd),
        rule47: pwd => /(123|321)/.test(pwd),
        rule48: pwd => weekdayPattern.test(pwd),
        rule49: pwd => /\b(CST|EST|PST|MST|UTC|GMT)\b/.test(pwd),
        rule50: pwd => /\b(North|South|East|West)\b/i.test(pwd),
        rule51: pwd => /\b(cm|kg|m|s)\b/.test(pwd),
        rule52: pwd => languages.some(l=>new RegExp('\\b'+l.replace(/\+/g,'\\+')+'\\b').test(pwd)),
        rule53: pwd => /\.(html|css|js)\b/i.test(pwd),
        rule54: pwd => /<\s*[a-z][^>]*>/i.test(pwd),
        rule55: pwd => /\(.*\)/.test(pwd),
        rule56: pwd => /['"]/.test(pwd),
        rule57: pwd => /[\+\-\*\/]/.test(pwd),
        rule58: pwd => /_/.test(pwd),
        rule59: pwd => /~/.test(pwd),
        rule60: pwd => /\\/.test(pwd),
        rule61: pwd => /@/.test(pwd),
        rule62: pwd => { const m=pwd.match(/[\$\â‚¬\Â£\Â¥]/g)||[]; return new Set(m).size >= 2; },
        rule63: pwd => /\b(one|two|three|four|five|six|seven|eight|nine|ten)\b/i.test(pwd),
        rule64: pwd => /\b(Spring|Summer|Autumn|Fall|Winter)\b/.test(pwd),
        rule65: pwd => weather.some(w=>new RegExp('\\b'+w+'\\b','i').test(pwd)),
        rule66: pwd => instruments.some(i=>new RegExp('\\b'+i+'\\b','i').test(pwd)),
        rule67: pwd => boardGames.some(g=>new RegExp('\\b'+g.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule68: pwd => videoGames.some(v=>new RegExp('\\b'+v+'\\b','i').test(pwd)),
        rule69: pwd => flowers.some(f=>new RegExp('\\b'+f+'\\b','i').test(pwd)),
        rule70: pwd => trees.some(t=>new RegExp('\\b'+t+'\\b','i').test(pwd)),
        rule71: pwd => birds.some(b=>new RegExp('\\b'+b+'\\b','i').test(pwd)),
        rule72: pwd => insects.some(i=>new RegExp('\\b'+i+'\\b','i').test(pwd)),
        rule73: pwd => carBrands.some(b=>new RegExp('\\b'+b+'\\b','i').test(pwd)),
        rule74: pwd => techBrands.some(b=>new RegExp('\\b'+b+'\\b','i').test(pwd)),
        rule75: pwd => socialNetworks.some(n=>new RegExp('\\b'+n.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule76: pwd => frameworks.some(f=>new RegExp('\\b'+f.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule77: pwd => clouds.some(c=>new RegExp('\\b'+c.replace(/\s+/g,'\\s+')+'\\b','i').test(pwd)),
        rule78: pwd => httpStatus.some(s=>new RegExp('\\b'+s+'\\b').test(pwd)),
        rule79: pwd => mimeTypes.some(m=>new RegExp('\\b'+m.replace(/\//g,'\\/')+'\\b').test(pwd)),
        rule80: pwd => /\bRFC\s*\d{2,5}\b/i.test(pwd),
        rule81: pwd => /\b(?:\d{1,3}\.){3}\d{1,3}\b/.test(pwd),
        rule82: pwd => /[;:]/.test(pwd),
        rule83: pwd => /=/.test(pwd),
        rule84: pwd => /\{.*\}/.test(pwd),
        rule85: pwd => /

\[.*\]

/.test(pwd),
        rule86: pwd => /<.*>/.test(pwd),
        rule87: pwd => /[\u2764\u2665]|\u{1F495}|\u{1F497}/u.test(pwd), // hearts
        rule88: pwd => /[Ï€Ï†]/.test(pwd),
        rule89: pwd => /(>=|<=)/.test(pwd),
        rule90: pwd => /%/.test(pwd),
        rule91: pwd => /\^/.test(pwd),
        rule92: pwd => /`/.test(pwd),
        rule93: pwd => /\blevel\b/i.test(pwd),
        rule94: pwd => /\bThriller\b/i.test(pwd),
        rule95: pwd => /\bBeyonce\b/i.test(pwd),
        rule96: pwd => /\bespresso\b/i.test(pwd),
        rule97: pwd => /\boolong\b/i.test(pwd),
        rule98: pwd => /\bcheddar\b/i.test(pwd),
        rule99: pwd => new RegExp('(' + tlDomains.map(d=>d.replace('.','\\.')).join('|') + ')').test(pwd),
        rule100: pwd => /\bLaunch\s+Deck\b/i.test(pwd)
      };

      // render rules
      rulesMeta.forEach(({id,label}) => {
        const li = document.createElement('li');
        li.id = id;
        li.textContent = label;
        rulesList.appendChild(li);
      });

      // state and sequential hide
      const ruleIds = rulesMeta.map(r=>r.id);
      const state = {}; // 'visible' | 'hidden'
      const hideQueue = [];
      const hideDelay = 160; // ms between hiding rules
      let hideTimer = null;

      // freebie state
      let freebieUsed = false;
      let selectedRule = null;

      ruleIds.forEach(id => state[id] = 'visible');

      function updateCounter(){
        const remaining = ruleIds.filter(id => state[id] === 'visible').length;
        remainingEl.textContent = remaining;
        const pct = Math.round(((ruleIds.length - remaining) / ruleIds.length) * 100);
        bar.style.width = pct + '%';
      }

      function processQueue(){
        if(hideTimer) return;
        function step(){
          if(hideQueue.length === 0){
            hideTimer = null;
            checkComplete();
            return;
          }
          const id = hideQueue.shift();
          const li = document.getElementById(id);
          if(!li){ hideTimer = setTimeout(step, hideDelay); return; }
          const pwd = input.value;
          try{
            if(checks[id](pwd) && state[id] === 'visible'){
              li.classList.add('hidden');
              state[id] = 'hidden';
              if(selectedRule === id){ selectedRule = null; clearSelectionStyles(); }
              updateCounter();
            }
          }catch(e){
            // on error, keep visible
            if(state[id] === 'hidden'){
              li.classList.remove('hidden');
              state[id] = 'visible';
              updateCounter();
            }
          }
          hideTimer = setTimeout(step, hideDelay);
        }
        hideTimer = setTimeout(step, 0);
      }

      function removeFromQueue(id){
        const i = hideQueue.indexOf(id);
        if(i !== -1) hideQueue.splice(i,1);
      }

      function showRule(id){
        const li = document.getElementById(id);
        if(!li) return;
        if(state[id] === 'visible') return;
        if(li.dataset.hiddenBy === 'freebie') return; // permanently hidden
        li.classList.remove('hidden');
        state[id] = 'visible';
        updateCounter();
        removeFromQueue(id);
      }

      function checkComplete(){
        const remaining = ruleIds.filter(id => state[id] === 'visible').length;
        if(remaining === 0){
          const content = document.getElementById('content');
          content.innerHTML = '<div class="complete">ðŸŽ‰ Game Complete! You satisfied 100 rules.<div class="hint">Unreal. You really did that.</div></div>';
        }
      }

      function handleInput(){
        const pwd = input.value;
        ruleIds.forEach(id => {
          let passes = false;
          try{ passes = !!checks[id](pwd); } catch(e){ passes = false; }
          if(passes){
            if(state[id] === 'visible' && hideQueue.indexOf(id) === -1){
              hideQueue.push(id);
            }
          } else {
            // if rule was auto-hidden and now broken, show it (unless freebie)
            if(state[id] === 'hidden'){
              showRule(id);
            }
            removeFromQueue(id);
          }
        });
        if(hideQueue.length > 0) processQueue();
        updateFreebieUI();
      }

      // selection for freebie
      function clearSelectionStyles(){
        ruleIds.forEach(id => {
          const li = document.getElementById(id);
          if(li) li.classList.remove('selected');
        });
      }

      rulesList.addEventListener('click', (e) => {
        const li = e.target.closest('li');
        if(!li) return;
        const id = li.id;
        if(freebieUsed) return;
        if(state[id] !== 'visible') return;
        if(selectedRule === id){
          selectedRule = null;
          li.classList.remove('selected');
        } else {
          selectedRule = id;
          clearSelectionStyles();
          li.classList.add('selected');
        }
        updateFreebieUI();
      });

      function updateFreebieUI(){
        if(freebieUsed){
          useFreebieBtn.disabled = true;
          freebieStatus.textContent = 'Freebie used';
        } else {
          useFreebieBtn.disabled = !selectedRule;
          freebieStatus.textContent = selectedRule ? 'Freebie ready for selected rule' : 'Freebie available';
        }
      }

      useFreebieBtn.addEventListener('click', () => {
        if(freebieUsed || !selectedRule) return;
        const id = selectedRule;
        const li = document.getElementById(id);
        if(!li) return;
        li.classList.add('hidden');
        li.dataset.hiddenBy = 'freebie';
        state[id] = 'hidden';
        freebieUsed = true;
        selectedRule = null;
        clearSelectionStyles();
        removeFromQueue(id);
        updateCounter();
        updateFreebieUI();
        checkComplete();
      });

      // init
      updateCounter();
      updateFreebieUI();
      input.addEventListener('input', handleInput);
      setTimeout(handleInput, 120);
      // re-evaluate time/day/year rules periodically
      setInterval(handleInput, 15000);
    })();
  </script>
</body>
</html>
